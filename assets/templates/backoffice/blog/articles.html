<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Articles <a ui-sref=".add"><div class="btn  btn-primary pull-right"><i class="fa fa-plus fa-fw"></i> Ajouter un article</div></a></h1>

    </div>
    <!-- /.col-lg-12 -->
</div>
<div class="row">
	<div ui-view></div>
</div>
<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading-table ">
            	<div class="row">
	            	<div class="col-md-4">
	            		
                    </div>


	            	 
            	</div>
            </div>
            <!-- /.panel-heading -->
            <div class="panel-body">

               
                <div class="col-md-8 col-md-offset-4 panel-heading-table">
                    <form role="form" class="" >
                        <div class="form-group input-group  col-md-6 pull-right">
                            <form name="searchUser">

                                <input type="text" class="form-control" ng-model="filter.slug" ng-blur="reload()">
                                <span class="input-group-btn">
                                    <button class="btn btn-default btn-search" type="submit" ng-click="reload()"><i class="fa fa-search"></i>
                                    </button>
                                </span>
                            </form>
                        </div>
                    </form>
                </div>

                <div class="table-responsive col-lg-12">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                               
                                <th style="width:80px"> Status</th>
                                <th style=""> Catégorie</th>
                                <th style="min-width:200px;"><i class="fa sorter  fa-user fa-sort-desc" ng-click="setOrder('title ASC')"ng-class="{active: filter.order=='title ASC'}"></i><i class="fa fa-user sorter fa-sort-asc" ng-click="setOrder('title DESC')"ng-class="{active: filter.order=='title DESC'}"></i> Titre</th>
                                <th style="width: 80px;"><i class="fa sorter  fa-user fa-sort-desc" ng-click="setOrder('nbView ASC')" ng-class="{active: filter.order=='nbView ASC'}"></i><i class="fa fa-user sorter fa-sort-asc" ng-click="setOrder('nbView DESC')" ng-class="{active: filter.order=='nbView DESC'}"></i> Vue</th>
                                <th > Tag</th>
                                <th style="width: 87px;"><i class="fa sorter fa-user fa-sort-desc" ng-class="{active: filter.order=='date ASC'}" ng-click="setOrder('date ASC')"></i><i class="fa fa-user sorter fa-sort-asc" ng-class="{active: filter.order=='date DESC'}" ng-click="setOrder('date DESC')"></i> Date</th>
                                <th style="width: 155px;">Images</th>
                                <th style="width: 100px;"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="chargement" ng-if="loading"> <td colspan="6"><i class="fa fa-user sorter fa-spinner fa-spin"></i></td></tr>
                            <tr ng-repeat="item in list">
                                <td class="text-center" >
                                    <label ng-if="item.status=='draft'" class="label label-warning" >Brouillon</label>
                                    <label ng-if="item.status=='actif'" class="label label-success" >Actif</label>
                                    <label ng-if="item.status=='inactif'" class="label label-warning" >Inactif</label>
                                </td>
                                <td><label class="label label-default" style="color:{{item.category.textColor}};background:{{item.category.color}};">{{item.category.name}}</label></td>
                                <td>{{item.title}}</td>
                                <td class="text-center" >{{item.nbView}}</td>
                                <td>
                                    <div class=" label label-xs label-primary " ng-repeat="tag in item.tags"><i class="fa fa-tag fa-fw"></i> {{tag.text}}</div>
                                </td>
                                <td>{{item.date | date:'dd/MM/yyyy'}}</td>
                                <td>
                                    <ul class="listimages">
                                        <li ng-repeat=" image in item.images | limitTo:4 | orderBy:'rank':false">
                                            <!-- {{item.images.length}} -->
                                        <img ng-src="file/image/adminThumbs/{{image.image.filename}}" alt="{{image.image.alt}}" width="30px" height="30px"></li>
                                        <li ng-show="item.images.length-4 > 0" ><small class="badge">+{{ item.images.length - 4}}</small></li>
                                    </ul>
                                </td>
                                <td>
                                    <div class="tablebtn btn btn-xs btn-danger pull-right"><i class="fa fa-trash fa-fw"></i></div>
                                    <a ui-sref=".edit"><div class="tablebtn btn btn-xs btn-primary pull-right"><i class="fa fa-edit fa-fw"></i></div></a>
                                </td>
                            </tr>
                          
                            
                            
                        </tbody>
                    </table>
                </div>
               	<nav class=" col-xs-10">
                  <pagination ng-change="pageChanged(page)" total-items="total" ng-model="filter.page" max-size="3" items-per-page="filter.perPage" class="pagination-sm pull-left" boundary-links="true" rotate="false" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>
                    <span class="totalTable pull-left"  ng-pluralize count="total"
                        when="{'0': 'aucun résultats',
                        'one': '1 résultat',
                        'other': '{} résultats'}">
                    </span>
                </nav>
                <nav class=" col-xs-2">
                    <span class=" pull-right totalTable" style="">par page</span>
                   <select class="form-control pull-right" ng-change="reloadUsers()" style="width: 80px;margin: 20px 0px;padding: 5px 10px;height: 30px;" ng-model="filter.perPage" name="perPage" >
                                        <option value="10">10</option>
                                        <option value="20">20</option>
                                        <option value="50">50</option>
                                        <option value="100">100</option>
                                    </select> 
                </nav>
                <!-- /.table-responsive -->
            </div>
            <!-- /.panel-body -->
        </div>
        <!-- /.panel -->
        <div class="row">
	        <div class="col-md-12 col-lg-12">
				<div class="panel panel-default">
			        <div class="panel-heading">
			            <i class="fa fa-bar-chart-o fa-fw"></i> Activité des mes derniers articles

			            <div class="pull-right">
			                <div class="btn-group">
			                    <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
			                        Période
			                        <span class="caret"></span>
			                    </button>
			                    <ul class="dropdown-menu pull-right" role="menu">
			                        <li><a href="#">Cette semaine</a>
			                        </li>
			                        <li><a href="#">Le moi dernier</a>
			                        </li>
			                        <li><a href="#">Cette année</a>
			                        </li>
			                        <li class="divider"></li>
			                        <li><a href="#">Depuis la création du site</a>
			                        </li>
			                    </ul>
			                </div>
			            </div>
			        </div>
			        <!-- /.panel-heading -->
			        <div class="panel-body">
			            <div id="chart-article-aqui" ></div>
			        </div>
		        <!-- /.panel-body -->
		    	</div>
        	</div> 
        	<div class="col-md-4 col-lg-3">
				<div class="panel panel-default">
			        <div class="panel-heading">
			            <i class="fa fa-bar-chart-o fa-fw"></i> Articles les plus vues
			            <div class="pull-right">
			                <!-- <div class="btn-group">
			                    <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
			                        Actions
			                        <span class="caret"></span>
			                    </button>
			                    <ul class="dropdown-menu pull-right" role="menu">
			                        <li><a href="#">Cette semaine</a>
			                        </li>
			                        <li><a href="#">Ce moi</a>
			                        </li>
			                        <li><a href="#">Cette année</a>
			                        </li>
			                        <li class="divider"></li>
			                        <li><a href="#">Depuis la création du site</a>
			                        </li>
			                    </ul>
			                </div> -->
			            </div>
			        </div>
			        <!-- /.panel-heading -->
			        <div class="panel-body">
			            <div id="chart-article-acti" ></div>
			        </div>
		        <!-- /.panel-body -->
			    </div>
	    	</div>

		</div> 

    </div>
</div>
<script type="text/javascript">
$(function() {

    Morris.Donut({
        element: 'chart-article-acti',
        data: [{
            label: "Aujourd'hui",
            value: 12
        }, {
            label: "Cette semaine",
            value: 36
        }, {
            label: "Le moi dernier",
            value: 20
        }, {
            label: "Il y a moins de 6 mois",
            value: 50
        }, {
            label: "Ceci est un tres grand titre d'articles qui peut erte long",
            value: 13
        }],
        colors:['darkgreen','green','lightgreen','orange','red'],
        resize: true
    });

    // Morris.Area({
    //     element: 'chart-article-aqui',
    //     data: [{
    //         period: '2012 Q1',
    //         user: 2666,
    //         membre: 2294,
    //     }, {
    //         period: '2012 Q2',
    //         user: 2778,
    //         membre: 302,
    //     }, {
    //         period: '2012 Q3',
    //         user: 4912,
    //         membre: 1969,
    //     }, {
    //         period: '2012 Q4',
    //         user: 3767,
    //         membre: 3597,
    //     }, {
    //         period: '2012 Q5',
    //         user: 6810,
    //         membre: 1914,
        
    //     }, {
    //         period: '2012 Q6',
    //         user: 6810,
    //         membre: 1914,
        
    //     }],
    //     behaveLikeLine:'false',
    //     xkey: 'period',
    //     ykeys: ['user','membre'],
    //     labels: ['User','Membre'],
    //     lineColors: ['#777','green'],
    //     fillOpacity:'1',
    //     xLabelFormat: function (x) {
    //               var IndexToMonth = [ "Jan", "Fev", "Mar", "Avr", "Mai", "Juin", "Juil", "Aoû", "Sep", "Oct", "Nov", "Dec" ];
    //               var month = IndexToMonth[ x.getMonth() ];
    //               var year = x.getFullYear();
    //               return year + ' ' + month;
    //           },
    //       dateFormat: function (x) {
    //               var IndexToMonth = [ "Jan", "Fev", "Mar", "Avr", "Mai", "Juin", "Juil", "Aoû", "Sep", "Oct", "Nov", "Dec" ];
    //               var month = IndexToMonth[ new Date(x).getMonth() ];
    //               var year = new Date(x).getFullYear();
    //               return year + ' ' + month;
    //           },
    //     pointSize: 5,
    //     hideHover: 'auto',
    //     resize: true,
    //     xLabels:'month'
    // });

    Morris.Bar({
      element: 'chart-article-aqui',
      data: [
        { y: 'Ceci est un tres grand titre d\'articlesCeci est un tres grand titre d\'articles', a: 100, b: 9 },
        { y: 'lorem ipsum dolor si amet', a: 75,  b: 6 },
        { y: 'Ceci est un tres grand titre d\'articles', a: 50,  b: 40 },
        { y: 'Articles Ceci est un tres grand titre d\'articles', a: 75,  b: 6 },
        { y: 'Articles 5', a: 50,  b: 18 },
        { y: 'Articles 6', a: 75,  b: 2 },
        // { y: 'Articles 7', a: 100, b: 9 },
        // { y: 'Articles 8', a: 50,  b: 18 },
        // { y: 'Articles 9', a: 75,  b: 2 },
        // { y: 'Articles 10', a: 100, b: 9 }
      ],
      
      xkey: 'y',
      ykeys: ['a','b'],
      labels: ['nbVue','nbShare'],
      stacked:true,
      barColors:['green','blue']
    });


});
</script>